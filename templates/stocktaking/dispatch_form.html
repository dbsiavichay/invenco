{% extends 'base.html' %}
{% load static %}

{% block page_title %}Despachos{% endblock %}

{% block content %}
<div id="app" class="row">
<div class="col-xs-12">
<div class="card">

	<div class="card-header">Añadir despacho</div>
	<div class="card-body">

		{% load widget_tweaks %}
		<div class="row">
			<div class="col-xs-3">
				<div class="list-group">
				    {% for type in types %}
					<a href="#" pk="{{ type.id }}" v-on:click="openModal" class="list-group-item">
					    {% if type.image %}			    	
			    		<img height="32" src="{{ type.image.url }}">
			    		{% else %}
			    		<img height="32" src="{% static 'images/gears.png' %}">
		    			{% endif %}
		    			<span>{{ type.name }}</span>
					</a>
					{% endfor %}

				</div>				
			</div>
			<div class="col-xs-9">
				<table id="tb-dispatch" class="table">
				    <thead>
				        <tr>
				        	<th>Producto</th>				          
					        <th>Cantidad</th>
					        <th>Caracteristicas</th>					        
					        <th>Acciones</th>
				        </tr>
				    </thead>
				    <tbody>
				    	{% verbatim %}				    	
				        <tr v-for="dispatch in dispatches">
				        	<td>{{ dispatch.product }}</td>					        
					        <td>{{ dispatch.quantity }}</td>					        
					        <td>
					        	<ul>					        		
					        		<li v-for="property in dispatch.properties">{{ property }}</li>					        		
					        	</ul>
					        </td>
					        <td class="col-xs-3">					        	
					        	<a :href="'/brand/'+ dispatch.id +'/edit/'" class="btn btn-default btn-xs">
					        		<span class="fa fa-pencil"></span>
					        	</a>
					        	<button class="btn btn-default btn-xs delete" data-model="brand" data-id="brand.id">
					        		<span class="fa fa-trash"></span>
					        	</button>
					        </td>
				        </tr>
				        {% endverbatim %}
				    </tbody>
			    </table>
			</div>
		</div>





		<form id="delete" action="/replacement/{{ replacement.id }}/delete/" method="POST">{% csrf_token %}</form>
		<div class="form form-horizontal">
			<div class="form-footer">
			    <div class="form-group">
			      <div class="col-md-9">
			        <button type="submit" form="form" class="btn btn-primary">
			        	<span class="fa fa-floppy-o"></span>
			        	Guardar
			        </button>		
			        {% if object %}
			        <button type="submit" form="delete" class="btn btn-danger">
			        	<span class="fa fa-trash"></span>
			        	Eliminar
			        </button>
			        {% endif %}			        
			        <a href="/replacement/" class="btn btn-default">
			        	<span class="fa fa-reply"></span>
			        	Regresar
			        </a>
			      </div>
			    </div>
			</div>
		</div>
	</div>



	<div class="modal fade in" id="myModal" tabindex="-1" role="dialog">
	    <div class="modal-dialog">
	        <div class="modal-content">
		        <div class="modal-header">
		            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
		            <h4 class="modal-title">Modal title</h4>
		        </div>
		        <div class="modal-body">
		            <form id="frm-modal" class="form form-horizontal">
						<div class="form-group">
					        <label class="col-xs-3 control-label" for="model">Modelos</label>
					        <div class="col-xs-9">							        						        
					        	<select class="select2" id="model" name="model" required>
					        		<option value="">--- Seleccionar ---</option>
					        		{% verbatim %}
					        		<option v-for="model in models" v-bind:value="model.id">{{ model.type }} {{ model.model }} | {{ model.stock }}</option>
					        		{% endverbatim %}
					        	</select>						    
					        </div>
					    </div>
					    <div class="form-group">
					        <label class="col-xs-3 control-label" for="quantity">Cantidad</label>
					        <div class="col-xs-9">							        						        
					        	<input class="form-control" type="number" id="quantity" name="quantity" required>
					        </div>
					    </div>					
					</form>
		        </div>
		        <div class="modal-footer">
		            <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Cerrar</button>
		            <!-- <button type="submit" form="frm-modal" class="btn btn-sm btn-success">Guardar</button> -->
		            <button v-on:click="submit" class="btn btn-sm btn-success">Guardar</button>
		        </div>
	        </div>
	    </div>
    </div>



</div>
</div>
</div>
{% endblock %}

{% block customjs %}
<script src="{% static 'plugins/jquery.validate.min.js' %}"></script>
<script src="{% static 'stocktaking/dispatch.js' %}"></script>
{% endblock %}